execute_test_suite_7.3_python2:
  stage: test
  image: $CI_REGISTRY/badarsebard/pyden-suite/pyden-selenium:latest
  services:
    - name: $CI_REGISTRY/badarsebard/pyden-suite/pyden-splunk:7.3
      alias: pyden-splunk
  variables:
    SPLUNK_PASSWORD: "changeme1"
    SPLUNK_START_ARGS: "--accept-license"
    SPLUNK_ANSIBLE_POST_TASKS: "file:///tmp/splunk_ansible_prep.yml"
    SPLUNK_ANSIBLE_ENV: "SPLUNK_PY_VERSION=python2"
    SPLUNK_VERSION: "7.3-debian"
  script:
    - python3 $CI_PROJECT_DIR/test/auto.py
  artifacts:
    when: on_failure
    paths:
      - artifacts/
  tags:
    - docker

execute_test_suite_8.0_python2:
  stage: test
  image: $CI_REGISTRY/badarsebard/pyden-suite/pyden-selenium:latest
  services:
    - name: $CI_REGISTRY/badarsebard/pyden-suite/pyden-splunk:8.0
      alias: pyden-splunk
  variables:
    SPLUNK_PASSWORD: "changeme1"
    SPLUNK_START_ARGS: "--accept-license"
    SPLUNK_ANSIBLE_POST_TASKS: "file:///tmp/splunk_ansible_prep.yml"
    SPLUNK_ANSIBLE_ENV: "SPLUNK_PY_VERSION=python2"
    SPLUNK_VERSION: "8.0-debian"
  script:
    - python3 $CI_PROJECT_DIR/test/auto.py
  artifacts:
    when: on_failure
    paths:
      - artifacts/
  tags:
    - docker

execute_test_suite_8.0_python3:
  stage: test
  image: $CI_REGISTRY/badarsebard/pyden-suite/pyden-selenium:latest
  services:
    - name: $CI_REGISTRY/badarsebard/pyden-suite/pyden-splunk:8.0
      alias: pyden-splunk
  variables:
    SPLUNK_PASSWORD: "changeme1"
    SPLUNK_START_ARGS: "--accept-license"
    SPLUNK_ANSIBLE_POST_TASKS: "file:///tmp/splunk_ansible_prep.yml"
    SPLUNK_ANSIBLE_ENV: "SPLUNK_PY_VERSION=python3"
    SPLUNK_VERSION: "8.0-debian"
  script:
    - python3 $CI_PROJECT_DIR/test/auto.py
  artifacts:
    when: on_failure
    paths:
      - artifacts/
  tags:
    - docker
